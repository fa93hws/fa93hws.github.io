<!DOCTYPE html><html lang="zh-cn"><head>
    <title>将 hook api 用于组件件通讯</title>
    <meta charset="utf-8">
  <link href="/static/css/vendors.4656e408.css" rel="stylesheet"><link href="/static/css/main.e65a143a.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="/static/css/blog.1289c4ac.css"><script charset="utf-8" src="/static/js/blog.1289c4ac.js"></script><script>var __ssr__blog_2__ = "JTdCJTIydGl0bGUlMjIlM0ElMjIlRTUlQjAlODYlMjBob29rJTIwYXBpJTIwJUU3JTk0JUE4JUU0JUJBJThFJUU3JUJCJTg0JUU0JUJCJUI2JUU0JUJCJUI2JUU5JTgwJTlBJUU4JUFFJUFGJTIyJTJDJTIyY3JlYXRlZEF0JTIyJTNBJTIyMjAxOC0xMS0xN1QxMCUzQTAyJTNBNDRaJTIyJTJDJTIyYXV0aG9yJTIyJTNBJTdCJTIydXJsJTIyJTNBJTIyaHR0cHMlM0ElMkYlMkZnaXRodWIuY29tJTJGZmE5M2h3cyUyMiUyQyUyMm5hbWUlMjIlM0ElMjJKdW5jaGFvJTIwV2FuZyUyMiUyQyUyMmF2YXRhclVybCUyMiUzQSUyMmh0dHBzJTNBJTJGJTJGYXZhdGFyczAuZ2l0aHVidXNlcmNvbnRlbnQuY29tJTJGdSUyRjEwNjI2NzU2JTNGdiUzRDQlMjIlMkMlMjJlbWFpbCUyMiUzQSUyMndqdW4wOTEyJTQwZ21haWwuY29tJTIyJTdEJTJDJTIybGFiZWxzJTIyJTNBJTVCJTdCJTIybmFtZSUyMiUzQSUyMlJlYWN0JTIyJTJDJTIyY29sb3IlMjIlM0ElMjIwMGQ4ZmYlMjIlMkMlMjJkZXNjcmlwdGlvbiUyMiUzQSUyMiUyMiU3RCUyQyU3QiUyMm5hbWUlMjIlM0ElMjIlRTUlODklOEQlRTclQUIlQUYlMjIlMkMlMjJjb2xvciUyMiUzQSUyMmZiY2EwNCUyMiUyQyUyMmRlc2NyaXB0aW9uJTIyJTNBJTIyd2ViJUU1JTg5JThEJUU3JUFCJUFGJUU3JTlCJUI4JUU1JTg1JUIzJTIyJTdEJTVEJTJDJTIyY29udGVudCUyMiUzQSUyMiU1QiUyRiUyRiU1RCUzQSUyMCUyMyUyMCglRTUlQjAlODZIb29rJTIwQXBpJTIwJUU3JTk0JUE4JUU0JUJBJThFJUU3JUJCJTg0JUU0JUJCJUI2JUU5JTk3JUI0JUU5JTgwJTlBJUU4JUFFJUFGKSU1Q24lMjMlMjMlMjAlRTUlODklOEQlRTglQTglODAlNUNuJTVDbiVFOCU5OSVCRCVFNyU4NCVCNiVFNSU5QyVBOCUyMCU2MFJlYWN0JTYwJTIwJUU0JUI4JUFEJUU3JTg4JUI2JUU1JUFEJTkwJUU3JUJCJTg0JUU0JUJCJUI2JUU5JTgwJTlBJUU4JUFFJUFGJUU5JTlEJTlFJUU1JUI4JUI4JUU0JUJFJUJGJUU1JTg4JUE5JTJDJTIwJUU0JUJEJTg2JUU2JTk4JUFGJUU1JTg1JTg0JUU1JUJDJTlGJUU5JTk3JUI0JTJDJTIwJUU2JTg4JTk2JUU4JTgwJTg1JUU5JTlBJTk0JUU0JUJBJTg2JUU1JUE1JUJEJUU1JTg3JUEwJUU0JUJCJUEzJUU3JTlBJTg0JUU3JUJCJTg0JUU0JUJCJUI2JUU5JTk3JUI0JUU5JTgwJTlBJUU4JUFFJUFGJUU3JTlCJUI4JUU1JUFGJUI5JUU2JUFGJTk0JUU4JUJFJTgzJUU5JUJBJUJCJUU3JTgzJUE2LiUyMCVFNCVCOCU4MCVFOCU4OCVBQyVFNSU5QyVBOCVFOCVCRiU5OSVFNyVBNyU4RCVFNiU4MyU4NSVFNSU4NiVCNSVFNCVCOCU4QiVFNCVCQyU5QSVFOSU4MCU4OSVFNiU4QiVBOSVFNSVCQyU5NSVFNSU4NSVBNSUyMCU2MFJlZHV4JTYwJTIwJUU2JTg4JTk2JUU2JTk4JUFGJTIwJTYwTW9ieCU2MCUyMCVFNCVCRCU5QyVFNCVCOCVCQSVFNCVCOCU4MCVFNCVCOCVBQSVFNSU4NSVBOCVFNSVCMSU4MCUyQyUyMCVFNiU4OCU5NiVFOCU4MCU4NSVFNCVCOCU4MCVFNCVCOCVBQSVFNiVBOCVBMSVFNSU5RCU5NyVFNSU4NiU4NSVFNyU5QSU4NCVFNyU4QSVCNiVFNiU4MCU4MSVFNyVBRSVBMSVFNyU5MCU4NiVFNSVCNyVBNSVFNSU4NSVCNy4lMjAlRTUlQjAlQkQlRTclQUUlQTElRTQlQkIlOTYlRTQlQkIlQUMlRTclOUElODQlRTQlQkQlOTMlRTclQTclQUYlRTklODMlQkQlRTYlQUYlOTQlRTglQkUlODMlRTUlQkElOUUlRTUlQTQlQTclMkMlMjAlRTQlQkQlODYlRTYlOTglQUYlRTUlOUMlQTglRTglQkYlOTklRTQlQjglQUElRTklOUMlODAlRTYlQjElODIlRTklOUQlQTIlRTUlODklOEQlRTQlQkIlOTYlRTQlQkIlQUMlRTQlQkUlOUQlRTYlOTclQTclRTYlOTglQUYlRTUlQkYlODUlRTQlQjglOEQlRTUlOEYlQUYlRTUlQjAlOTElRTclOUElODQlRTklODUlOEQlRTclQkQlQUUlRTQlQjklOEIlRTQlQjglODAuJTVDbiVFNyU4NCVCNiVFOCU4MCU4QyVFOSU5QSU4RiVFNyU5RCU4MCUyMCU2MEhvb2slMjBBcGklNjAlMjAlRTclOUElODQlRTklOTclQUUlRTQlQjglOTYlRTclOTUlOEMlMkMlMjAlRTUlODUlQjYlRTYlOTclQTAlRTklOTklOTAlRTclOUElODQlRTUlOEYlQUYlRTglODMlQkQlRTYlODAlQTclRTglQUUlQTklRTQlQkElQkElRTYlQjUlQUUlRTYlODMlQjMlRTglQkYlOUUlRTclQUYlODcuJTVDbiU1Q24lRTYlOUMlQUMlRTYlOTYlODclRTUlQjAlODYlRTQlQkMlOUElRTglQUYlQTYlRTglQkYlQjAlRTUlQTYlODIlRTQlQkQlOTUlRTglQkYlOTAlRTclOTQlQTglMjAlNjBIb29rJTIwQXBpJTYwJTIwJUU2JTlCJUJGJUU0JUJCJUEzJTIwJTYwUmVkdXglNjAlMjAlMkYlMjAlNjBNb2J4JTYwJTIwJUU2JTlEJUE1JUU2JThCJTg1JUU1JUJEJTkzJUU1JTg1JUI2JUU3JUJCJTg0JUU0JUJCJUI2JUU5JTk3JUI0JUU3JTk0JTlBJUU4JTg3JUIzJUU2JTk4JUFGJUU1JTg1JUE4JUU1JUIxJTgwJUU3JTlBJTg0JUU3JThBJUI2JUU2JTgwJTgxJUU3JUFFJUExJUU3JTkwJTg2JUU1JUI3JUE1JUU1JTg1JUI3LiU1Q24lRTYlOUMlQUMlRTYlOTYlODclRTUlQjAlODYlRTQlQkMlOUElRTklQTYlOTYlRTUlODUlODglRTQlQkMlOUElRTclQUUlODAlRTclOUYlQUQlRTclOUElODQlRTQlQkIlOEIlRTclQkIlOEQlRTQlQjglOEIlMjAlNjBIb29rJTIwQXBpJTYwJTIwJUU0JUI5JThCJUU1JTkwJThFJUU1JUIwJTg2JUU0JUJDJTlBJUU0JUJCJThCJUU3JUJCJThEJUU1JUE2JTgyJUU0JUJEJTk1JUU0JUJEJUJGJUU3JTk0JUE4JUU0JUJCJTk2JUU0JUJCJUFDJUU2JTlEJUE1JUU1JUFFJTlFJUU3JThFJUIwJUU0JUJCJUJCJUU2JTg0JThGJUU3JUIyJTkyJUU1JUJBJUE2JUU3JTlBJTg0JUU3JThBJUI2JUU2JTgwJTgxJUU3JUFFJUExJUU3JTkwJTg2LiU1Q24lNUNuJTIzJTIzJTIwSG9vayUyMEFwaSU1Q24lNUNuJTYwSG9vayUyMEFwaSU2MCUyMCVFNiU5OCVBRiUyMHJlYWN0JTIwJUU0JUJBJThFJTIwMjAxOCUyMCVFNSVCOSVCNCVFNiU4RiU5MCVFNSU4NyVCQSVFNyU5QSU4NCVFNiU5QyU4MCVFNiU5NiVCMEFwaSUyQyUyMCVFNyU5QiVBRSVFNSU4OSU4RCgyMDE4JUU1JUI5JUI0MTElRTYlOUMlODgxOCVFNiU5NyVBNSklRTglQkYlOTglRTUlQTQlODQlRTQlQkElOEUlMjBhbHBoYSUyMCVFOSU5OCVCNiVFNiVBRSVCNShSZWFjdCUyMDE2LjcuMC1hbHBoYS4yKS4lMjAlRTglQUYlQTUlMjBBcGklMjAlRTclOUElODQlRTQlQjglQkIlRTglQTYlODElRTUlOEElOUYlRTglODMlQkQlRTUlOUMlQTglRTQlQkElOEUlRTUlQkMlQkElRTUlOEMlOTYlRTQlQkElODYlMjAlNjBmdW5jdGlvbmFsJTIwY29tcG9uZW50JTYwJTIwJUU1JUFGJUI5JTIwJTYwc3RhdGUlNjAlMjAlRTQlQkIlQTUlRTUlOEYlOEElRTclOTQlOUYlRTUlOTElQkQlRTUlOTElQTglRTYlOUMlOUYlRTUlODclQkQlRTYlOTUlQjAoJUU0JUJFJThCJUU1JUE2JTgyJTIwJTYwY29tcG9uZW50RGlkTW91bnQlNjAlRTclQUQlODkpJTIwJUU3JTlBJTg0JUU2JTkzJThEJUU0JUJEJTlDJUU4JTgzJUJEJUU1JThBJTlCJTJDJTIwJUU0JUJEJUJGJUU1JUJFJTk3JTIwJTYwZnVuY3Rpb25hbCUyMGNvbXBvbmVudCU2MCUyMCVFNCVCOCU4RCVFNSU4NiU4RCVFNiU5OCVBRiUyMCU2MHN0YXRlbGVzcyUyMGNvbXBvbmVudCU2MCUyQyUyMCVFOCU4MCU4QyVFNiU4OCU5MCVFNCVCOCVCQSVFNCVCQSU4NiUyMCU2MHN0YXRlZnVsJTIwY29tcG9uZW50JTYwJTJDJTIwJUU1JUI5JUI2JUU0JUI4JTk0JUU4JTgzJUJEJUU1JUE0JTlGJUU1JTkyJThDJTYwY2xhc3MlMjBjb21wb25lbnQlNjAlRTQlQjglODAlRTYlQTAlQjclRTQlQkQlQkYlRTclOTQlQTglRTclOTQlOUYlRTUlOTElQkQlRTUlOTElQTglRTYlOUMlOUYlRTUlODclQkQlRTYlOTUlQjAuJTIwJUU0JUI4JThEJUU0JUJCJTg1JUVGJUJGJUJEJUVGJUJGJUJEJUU2JUFEJUE0JTJDJTIwJTYwSG9vayUyMEFwaSU2MCVFOCVCRiU5OCVFNSVBNCVBNyVFNSVBNCVBNyVFNSVBMiU5RSVFNSVCQyVCQSVFNCVCQSU4NiVFOSU4MCVCQiVFOCVCRSU5MSVFNyU5QSU4NCVFNSU4RiVBRiVFNSVBNCU4RCVFNyU5NCVBOCVFNiU4MCVBNyUyQyUyMCVFNSU5QyVBOCVFNyVBQyU5NCVFOCU4MCU4NSVFNyU5QyU4QiVFNiU5RCVBNSUyQyVFOCVBRiVBNSUyMEFwaSUyMCVFNSVCRiU4NSVFNSVCMCU4NiVFOCVBMiVBQiVFNSU5MCU4NCVFNSVBNCVBNyVFNSU4OSU4RCVFNyVBQiVBRiVFNiVBMSU4NiVFNiU5RSVCNiVFNSU4MCU5RiVFOSU4OSVCNCVFNSVCOSVCNiVFNSVCQyU5NSVFOSVBMiU4NiVFNCVCOCU4MCVFNSU5QyVCQSUyMEFwaSUyMCVFNyU5QSU4NCVFOSU5RCVBOSVFNSU5MSVCRC4lNUNuJTVDbiVFNSU4NSVCMyVFNCVCQSU4RSUyMCU2MEhvb2slMjBBcGklNjAlMjAlRTYlOUIlQjQlRTglQUYlQTYlRTclQkIlODYlRTclOUElODQlRTQlQkIlOEIlRTclQkIlOEQlRTUlOEYlQUYlRTUlOEYlODIlRTglODAlODMlMjAyMDE4JTIwJUU1JUI5JUI0JUU3JTlBJTg0JTIwJTVCUmVhY3QlMjBDb25mJTVEKGh0dHBzJTNBJTJGJTJGd3d3LnlvdXR1YmUuY29tJTJGd2F0Y2glM0Z2JTNEZHB3OUVIRGgyYk0pJTIwJUU2JTg4JTk2JUU2JTk4JUFGJTIwJTVCJUU1JUFFJTk4JUU2JTk2JUI5JUU2JTk2JTg3JUU2JUExJUEzJTVEKGh0dHBzJTNBJTJGJTJGcmVhY3Rqcy5vcmclMkZkb2NzJTJGaG9va3MtcmVmZXJlbmNlLmh0bWwpJTVDbiU1Q24lMjMlMjMlMjMlMjB1c2VTdGF0ZSU1Q24lRTUlQUYlQjklRTQlQkElOEUlRTQlQjglODAlRTQlQjglQUElMjAlNjBSZWFjdCU2MCUyMCVFNCVCOCVBRCVFNCVCQyVBMCVFNyVCQiU5RiVFNyU5QSU4NCUyMCU2MGNsYXNzJTIwY29tcG9uZW50JTYwJUU2JTlEJUE1JUU4JUFGJUI0JTJDJTIwJUU2JTlCJUI0JUU2JTk2JUIwJTIwJTYwc3RhdGUlNjAlMjAlRTQlQjglOEQlRTQlQkIlODUlRTklOUMlODAlRTglQTYlODElRTUlOUMlQTglMjAlNjBjb25zdHJ1Y3RvciU2MCUyMCVFNCVCOCVBRCVFNSU4OCU5RCVFNSVBNyU4QiVFNSU4QyU5NiUyQyUyMCVFOCVCRiU5OCVFOSU5QyU4MCVFOCVBNiU4MSVFNiVBRiU4RiVFNiVBQyVBMSVFOSU4MyVCRCVFOCVCMCU4MyVFNyU5NCVBOCUyMCU2MHNldFN0YXRlJTYwJTIwJUU2JTlEJUE1JUU5JTgwJTlBJUU3JTlGJUE1JTIwVUklMjAlRTYlOUIlQjQlRTYlOTYlQjAuJTIwJUU0JUJCJUEzJUU3JUEwJTgxJUU5JTgwJTlBJUU1JUI4JUI4JUU3JTlCJUI4JUU1JUJEJTkzJUU1JTg2JTk3JUU0JUJEJTk5LiUyMCVFNSU5QiVBMCVFNiVBRCVBNCVFNCVCQyVBMCVFNyVCQiU5RiVFNyU5QSU4NCUyMCU2MFJlYWN0JTYwJTIwJUU4JUFFJUJFJUU4JUFFJUExJUU2JUE4JUExJUU1JUJDJThGJUU5JTgwJTlBJUU1JUI4JUI4JUU5JTgzJUJEJUU1JUJCJUJBJUU4JUFFJUFFJUU3JUE4JThCJUU1JUJBJThGJUU1JTkxJTk4JUU1JUIwJTg2JUU3JUJCJTg0JUU0JUJCJUI2JUU2JThCJTg2JUU1JTg4JTg2JUU2JTg4JTkwJUU4JUI0JTlGJUU4JUI0JUEzJUU5JTgwJUJCJUU4JUJFJTkxJUU3JTlBJTg0JTIwJTYwY29udGFpbmVyJTYwJTIwJUU0JUJCJUE1JUU1JThGJThBJUU4JUI0JTlGJUU4JUI0JUEzJTIwVUklMjAlRTUlQjElOTUlRTclOEUlQjAlRTclOUElODQlMjAlNjBjb21wb25lbnQlNjAuJTIwJTYwY29udGFpbmVyJTYwJTIwJUU4JUI0JTlGJUU4JUI0JUEzJUU1JTkwJTg0JUU3JUE3JThEJTIwJTYwc3RhdGUlNjAlMjAlRTklODAlQkIlRTglQkUlOTElRTYlOUIlQjQlRTYlOTYlQjAlMkMlMjAlRTclOTQlOUYlRTUlOTElQkQlRTUlOTElQTglRTYlOUMlOUYlRTUlODclQkQlRTYlOTUlQjAlRTYlOTMlOEQlRTQlQkQlOUMlMkMlMjAlRTUlQjklQjYlRTUlQjAlODYlRTklOUMlODAlRTglQTYlODElRTYlQjglQjIlRTYlOUYlOTMlRTclOUElODQlRTYlOTUlQjAlRTYlOEQlQUUlRTklODAlOUElRTglQkYlODclMjAlNjBwcm9wcyU2MCUyMCVFNCVCQyVBMCVFOSU4MCU5MiVFNyVCQiU5OSUyMCVFOCVCNCU5RiVFOCVCNCVBMyUyMFVJJTIwJUU1JUIxJTk1JUU3JThFJUIwJUU3JTlBJTg0JTIwJTYwY29tcG9uZW50JTYwLiUyMCVFOCU4MCU4QyVFOCVCRiU5OSVFNCVCOCVBQSUyMCU2MGNvbXBvbmVudCU2MCUyMCVFNCVCOCU4RCVFNCVCRiU5RCVFNiU5QyU4OSVFNCVCQiVCQiVFNCVCRCU5NSUyMCU2MHN0YXRlJTYwKCVFNCVCOSU5RiVFNSU5QiVBMCVFNiVBRCVBNCVFNyVBNyVCMCVFNCVCOSU4QiVFNCVCOCVCQSUyMCU2MHN0YXRlbGVzcyUyMGNvbXBvbmVudCU2MCklMkMlMjAlRTUlOEYlQUElRTYlOTglQUYlRTYlQTAlQjklRTYlOEQlQUUlMjAlNjBjb250YWluZXIlNjAlMjAlRTQlQkMlQTAlRTklODAlOTIlRTclOUElODQlMjAlNjBwcm9wcyU2MCUyMCVFNiVCOCVCMiVFNiU5RiU5My4lNUNuJTVDbiVFOCVCRiU5OSVFNyVBNyU4RCVFNCVCQyVBMCVFNyVCQiU5RiVFNyU5QSU4NCVFNSU4MSU5QSVFNiVCMyU5NSVFNSVCRSU4MCVFNSVCRSU4MCVFNCVCRCVCRiVFNSVCRSU5NyVFNSVCRSU4OCVFNyVBRSU4MCVFNSU4RCU5NSVFNyU5QSU4NCVFNCVCQSU4QiVFNiU4MyU4NSVFOSU5QyU4MCVFOCVBNiU4MSVFNyU5QiVCOCVFNSVCRCU5MyVFNSVBNCVBNyVFNyU5QSU4NCVFNCVCQiVBMyVFNyVBMCU4MSVFOSU4NyU4RiVFNiU4OSU4RCVFOCU4MyVCRCVFNSVBRSU4QyVFNiU4OCU5MC4lMjAlRTclQUUlODAlRTUlOEQlOTUlRTYlOUQlQTUlRTglQUYlQjQlMkMlMjAlRTUlQUYlQjklRTQlQkElOEUlRTQlQjglODAlRTQlQjglQUElRTglQUUlQTElRTYlOTUlQjAlRTUlOTklQTglMjAoJUU0JUI4JUJBJUU0JUJBJTg2JUU3JUFFJTgwJUU1JThDJTk2JUU0JUJCJUEzJUU3JUEwJTgxJTJDJTIwJUU1JUI5JUI2JUU2JUIyJUExJUU2JTlDJTg5JUU2JThCJTg2JUU1JTg4JTg2JUU2JTg4JTkwJTIwJTYwY29udGFpbmVyJTYwJTIwJUU1JTkyJThDJTIwJTYwY29tcG9uZW50JTYwKSU1Q24lNUNuJTYwJTYwJTYwJTVDbmNsYXNzJTIwQ291bnRlciUyMGV4dGVuZHMlMjBSZWFjdC5Db21wb25lbnQlMjAlN0IlNUNuJTIwJTIwJTIwJTIwY29uc3RydWN0b3IocHJvcHMpJTIwJTdCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHRoaXMuc3RhdGUlMjAlM0QlMjAlN0IlNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwY291bnRlciUzQSUyMDAlNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTdEJTNCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHRoaXMuaGFuZGxlQ2xpY2slMjAlM0QlMjB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyklM0IlNUNuJTIwJTIwJTIwJTIwJTdEJTVDbiUyMCUyMCUyMCUyMCU1Q24lMjAlMjAlMjAlMjBoYW5kbGVDbGljaygpJTIwJTdCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHRoaXMuc2V0U3RhdGUoJTdCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC4uLnRoaXMuc3RhdGUlMkMlNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwY291bnRlciUzQSUyMHRoaXMuc3RhdGUuY291bnRlciUyMCUyQiUyMDElNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTdEKSUzQiU1Q24lMjAlMjAlMjAlMjAlN0QlNUNuJTIwJTIwJTIwJTIwJTVDbiUyMCUyMCUyMCUyMHJlbmRlcigpJTIwJTdCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHJldHVybiUyMCglNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDZGl2JTNFJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ3AlM0UlN0J0aGlzLnN0YXRlLmNvdW50ZXIlN0QlM0MlMkZwJTNFJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ2J1dHRvbiUyMG9uQ2xpY2slM0QlN0J0aGlzLmhhbmRsZUNsaWNrJTdEJTNFJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCVFNyU4MiVCOSVFNiU4OCU5MSU1Q24lMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZidXR0b24lM0UlNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGZGl2JTNFJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCklM0IlNUNuJTIwJTIwJTIwJTIwJTdEJTVDbiU3RCU1Q24lNjAlNjAlNjAlNUNuJTVDbiVFNSU4RiVBRiVFNCVCQiVBNSVFNyU5QyU4QiVFNSU4OCVCMCUyQyUyMCVFNCVCQiU4NSVFNCVCQiU4NSVFNCVCOCU4MCVFNCVCOCVBQWNvdW50ZXIlMkMlMjAlRTUlQjAlQjElRTklOUMlODAlRTglQTYlODElMjAyMCUyMCVFNSVBNCU5QSVFOCVBMSU4QyVFNyU5QSU4NCVFNCVCQiVBMyVFNyVBMCU4MSVFNiU4OSU4RCVFOCU4MyVCRCVFNSVBRSU4QyVFNiU4OCU5MCUyQyUyMCVFNSVCOSVCNiVFNCVCOCU5NCVFNSVBNCVBNyVFOSU4MyVBOCVFNSU4OCU4NiVFNyU5QSU4NCVFNCVCQiVBMyVFNyVBMCU4MSVFOSU4MyVCRCVFNyU5NCVBOCVFNiU5RCVBNSVFNSVBNCU4NCVFNyU5MCU4NiVFOCVBRiVCOCVFNSVBNiU4MiUyMCU2MHNldFN0YXRlJTYwJTIwJUU5JTlDJTgwJUU4JUE2JTgxJUU2JTk1JUI0JUU0JUI4JUFBJUU2JTk2JUIwJUU3JTlBJTg0JTIwJTYwc3RhdGUlNjAlMjAlRTglODAlOEMlRTQlQjglOEQlRTYlOTglQUYlRTUlOEYlQUElRTYlOUIlQjQlRTYlOTYlQjAlRTUlODUlQjYlRTQlQjglQUQlRTclOUElODQlRTQlQjglODAlRTQlQjglQTQlRTQlQjglQUElRTUlQUQlOTclRTYlQUUlQjUlMkMlMjAlNjBqYXZhc2NyaXB0JTYwJTIwJUU1JUE0JUE5JUU3JTk0JTlGJUU3JTlBJTg0JTIwJTYwdGhpcyU2MCUyMCVFNiU4QyU4NyVFNCVCQiVBMyVFNiVCNyVCNyVFNCVCOSVCMSVFNSVBRiVCQyVFOCU4NyVCNCVFNyU5QSU4NCVFNSU5QyVBOCVFNiU5RSU4NCVFOSU4MCVBMCVFNSU4NyVCRCVFNiU5NSVCMCVFNCVCOCVBRCVFNyU5QSU4NCU2MGJpbmQlNjAuJTIwJUU1JUI5JUI2JUU0JUI4JTk0JUU1JUE2JTgyJUU2JTlFJTlDJUU1JTg1JUI2JUU0JUJCJTk2JUU1JTlDJUIwJUU2JTk2JUI5JUU0JUI5JTlGJUU5JTlDJTgwJUU4JUE2JTgxJUU2JTlDJTg5JTIwJTYwY291bnRlciU2MCUyMCVFNyU4MiVCOSVFNSU4NyVCQiVFNCVCQSU4QiVFNCVCQiVCNiVFNyU5QSU4NCVFOCVBRiU5RCUyQyUyMCVFOCVBRiVBNSVFNiVBRSVCNSVFNCVCQiVBMyVFNyVBMCU4MSVFNCVCOCVBRCVFNyU5QSU4NCVFOSU4MCVCQiVFOCVCRSU5MSVFNSVCOSVCNiVFNCVCOCU4RCVFOCU4MyVCRCVFNyU5QiVCNCVFNiU4RSVBNSVFNyU5NCVBOCVFNCVCQSU4RSVFNSU4RiVBNiVFNCVCOCU4MCVFNCVCOCVBQSVFNyVCQiU4NCVFNCVCQiVCNiUyQyVFNSU4RiVBQSVFOCU4MyVCRCVFNCVCRCVCRiVFNyU5NCVBOCVFNCVCOCU5MSVFOSU5OSU4QiVFNyU5QSU4NCVFNSVBNCU4RCVFNSU4OCVCNiVFNyVCMiU5OCVFNSVCOCU5Ni4lNUNuJTVDbiVFNCVCOCVCQSVFNCVCQSU4NiVFOCVBNyVBMyVFNSU4NiVCMyVFOCVCRiU5OSVFNCVCOCVBQSVFOSU5NyVBRSVFOSVBMiU5OCUyQyUyMCU2MHVzZVN0YXRlJTYwJTIwJUU1JUJBJTk0JUU4JUJGJTkwJUU4JTgwJThDJUU3JTk0JTlGLiUyMCVFOSVBMSVCRSVFNSU5MCU4RCVFNiU4MCU5RCVFNCVCOSU4OSUyQyUyMCU2MHVzZVN0YXRlJTYwJTIwJUU1JUIwJUIxJUU2JTk4JUFGJUU0JUJEJUJGJUU3JTk0JUE4JTIwJTYwc3RhdGUlNjAlMjAlRTclOUElODQlRTYlODQlOEYlRTYlODAlOUQuJTIwJUU1JTkwJThDJUU2JUEwJUI3JUU3JTlBJTg0JUU1JUFGJUI5JUU0JUJBJThFJUU0JUI4JThBJUU4JUJGJUIwJTIwJTYwY291bnRlciU2MCUyQyUyMCVFNyU4RSVCMCVFNSU5QyVBOCVFNSU4RiVBQSVFOSU5QyU4MCVFOCVBNiU4MSU1Q24lNUNuJTYwJTYwJTYwJTVDbmZ1bmN0aW9uJTIwQ291bnRlcigpJTIwJTdCJTVDbiUyMCUyMCUyMCUyMCU1QmNvdW50ZXIlMkMlMjBzZXRDb3VudGVyJTVEJTIwJTNEJTIwUmVhY3QudXNlU3RhdGUoMCklM0IlNUNuJTIwJTIwJTIwJTIwcmV0dXJuJTIwKCU1Q24lMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NkaXYlM0UlNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDcCUzRSU3QmNvdW50ZXIlN0QlM0MlMkZwJTNFJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ2J1dHRvbiUyMG9uQ2xpY2slM0QlN0JzZXRDb3VudGVyLmJpbmQobnVsbCUyQyUyMGNvdW50ZXIlMkIxKSU3RCUzRSU1Q24lMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlRTclODIlQjklRTYlODglOTElNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGYnV0dG9uJTNFJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRmRpdiUzRSU1Q24lMjAlMjAlMjAlMjApJTVDbiU3RCU1Q24lNjAlNjAlNjAlNUNuJTVDbiVFNSU4RCVCMyVFNSU4RiVBRiUyQyUyMCVFNCVCQiVBMyVFNyVBMCU4MSVFOSU4NyU4RiVFNyU5RSVBQyVFOSU5NyVCNCVFNyVCQyVBOSVFNyU5RiVBRCVFNCVCQSU4NiVFNCVCOCU4MCVFNSU4MCU4RCUyQyUyMCVFNSVCOSVCNiVFNCVCOCU5NCVFNSU4RiVBRiVFRiVCRiVCRCVFRiVCRiVCRCVFNiU4MCVBNyVFNCVCOSU5RiVFNSVBNSVCRCVFNCVCQSU4NiVFNSVCRSU4OCVFNSVBNCU5QSglRTclOUIlQjglRTYlQUYlOTQlRTQlQjglOEUlRTQlQjklOEIlRTUlODklOEQlRTglQUUlQjglRTUlQTQlOUElRTYlODQlOEYlRTQlQjklODklRTQlQjglOEQlRTYlOTglOEUlRTclOUElODQlNjBiaW5kJTYwJTJDJTIwJTYwc2V0U3RhdGUlNjAlMjAlRTQlQjglQUQlRTclOUElODQlMjAlNjAuLi4lNjApLiU1Q24lRTYlOUIlQjQlRTQlQkIlQTQlRTQlQkElQkElRTclQTclQjAlRTglQjUlOUUlRTclOUElODQlRTYlOTglQUYlMkMlMjAlRTUlQkQlOTMlRTUlODUlQjYlRTQlQkIlOTYlRTUlOUMlQjAlRTYlOTYlQjklRTQlQjklOUYlRTklOUMlODAlRTglQTYlODElRTclODIlQjklRTUlODclQkIlRTglQUUlQTElRTYlOTUlQjAlRTUlOEElOUYlRTglODMlQkQlRTYlOTclQjYlMkMlMjAlRTglQkYlOTklRTYlQUUlQjUlRTklODAlQkIlRTglQkUlOTElRTUlQUUlOEMlRTUlODUlQTglRTUlOEYlQUYlRTQlQkIlQTUlRTYlOEElQkQlRTclQTYlQkIlRTYlODglOTAlRTQlQjglQkElRTUlOEQlOTUlRTclOEIlQUMlRTclOUElODQlRTQlQjglODAlRTYlQUUlQjUlRTUlODclQkQlRTYlOTUlQjAlMkMlMjAlRTUlQjklQjYlRTQlQjglOTQlRTUlOUMlQTglRTUlQTQlOUElRTQlQjglQUElRTclQkIlODQlRTUlQkIlQkElRTQlQjglQUQlRTglQjAlODMlRTclOTQlQTguJTVDbiU1Q24lNjAlNjAlNjAlNUNuZnVuY3Rpb24lMjBDb3VudGVyKCklMjAlN0IlNUNuJTIwJTIwJTIwJTIwJTVCY291bnRlciUyQyUyMGluYyU1RCUyMCUzRCUyMHVzZUNvdW50ZXIoMCklM0IlNUNuJTIwJTIwJTIwJTIwcmV0dXJuJTIwKCU1Q24lMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NkaXYlM0UlNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDcCUzRSU3QkNvdW50ZXIlN0QlM0MlMkZwJTNFJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ2J1dHRvbiUyMG9uQ2xpY2slM0QlN0JpbmMlN0QlNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJUU3JTgyJUI5JUU2JTg4JTkxJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRmJ1dHRvbiUzRSU1Q24lMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZkaXYlM0UlNUNuJTIwJTIwJTIwJTIwKSU1Q24lN0QlNUNuJTVDbmZ1bmN0aW9uJTIwdXNlQ291bnRlcihpbml0aWFsVmFsdWUpJTIwJTdCJTVDbiUyMCUyMCUyMCUyMCU1QmNvdW50ZXIlMkMlMjBzZXRDb3VudGVyJTVEJTIwJTNEJTIwUmVhY3QudXNlU3RhdGUoaW5pdGlhbFZhbHVlKSUzQiU1Q24lMjAlMjAlMjAlMjBmdW5jdGlvbiUyMGluYygpJTIwJTdCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHNldENvdW50ZXIoY291bnRlciUyMCUyQiUyMDEpJTNCJTVDbiUyMCUyMCUyMCUyMCU3RCU1Q24lMjAlMjAlMjAlMjByZXR1cm4lMjAlNUJjb3VudGVyJTJDJTIwaW5jJTVEJTNCJTVDbiU3RCU1Q24lNjAlNjAlNjAlNUNuJTVDbiVFNiU5QiVCNCVFOCVBRiVBNiVFNyVCQiU4NiVFNyU5QSU4NCVFNCVCQiU4QiVFNyVCQiU4RCVFNSU4RiVBRiVFNCVCQiVBNSVFNSU4RiU4MiVFOCU4MCU4MyU1QiVFNSVBRSU5OCVFNiU5NiVCOSVFNiU5NiU4NyVFNiVBMSVBMyU1RChodHRwcyUzQSUyRiUyRnJlYWN0anMub3JnJTJGZG9jcyUyRmhvb2tzLXN0YXRlLmh0bWwpJTVDbiU1Q24lMjMlMjMlMjMlMjB1c2VFZmZlY3QlNUNuJTVDbiVFNCVCOCU4RSUyMCU2MHVzZVN0YXRlJTYwJTIwJUU3JTlCJUI4JUU1JUFGJUI5JTJDJTIwJTYwdXNlRWZmZWN0JTYwJTIwJUU1JTg4JTk5JUU0JUI4JThEJUU5JTgyJUEzJUU0JUI5JTg4JUU3JTlBJTg0JUU5JUExJUJFJUU1JTkwJThEJUU2JTgwJTlEJUU0JUI5JTg5LiUyMCVFNSU4NSVCNiVFOCVBMSVBOCVFNyVBNCVCQSVFNCVCRCVCRiVFNyU5NCVBOCVFNiU5NSU4OCVFNiU5RSU5QyUyQyUyMCVFNSU5QiVBMCVFNCVCOCVCQSVFNCVCQyVBMCVFNyVCQiU5RiVFNyU5QSU4NCUyMCU2MGNsYXNzJTIwY29tcG9uZW50JTYwJTIwJUU0JUI4JUFEJTJDJTIwJTYwY29tcG9uZW50RGlkTW91bnQlNjAlMjAlRTUlOTIlOEMlMjAlNjBjb21wb25lbnREaWRVcGRhdGUlNjAlMjAlRTklODMlQkQlRTQlQkMlOUElRTUlQjglQTYlRTYlOUQlQTUlRTUlOTAlODQlRTclQTclOEQlRTYlOTUlODglRTYlOUUlOUMlMkMlMjAlRTQlQjklOUYlRTUlOUIlQTAlRTQlQjglQkElMjAlNjBSZWFjdCU2MCUyMCVFNSU5QiVBMiVFOSU5OCU5RiVFNiU4MyVCMyVFOCVBNiU4MSVFNiVCNyVBMSVFNSU4QyU5NiVFOCVCRiU5OSVFNCVCOCVBNCVFOCU4MCU4NSVFNyU5QSU4NCVFNSU4QyVCQSVFNSU4OCVBQiUyQyVFNSU5QiVBMCVFNiVBRCVBNCUyMCU2MHVzZUVmZmVjdCU2MCUyMCVFNSVCMCVCMSVFOCVBRiU5RSVFNyU5NCU5RiVFNCVCQSU4NiUyQyUyMCVFNSVBRSU4MyVFOCVBMiVBQiVFNyU5NCVBOCVFNCVCQSU4RSVFNSU5QyVBOCU2MGZ1bmN0aW9uYWwlMjBjb21wb25lbnQlNjAlMjAlRTQlQjglQUQlRTYlOEIlODUlRTQlQkIlQkIlMjAlNjBjb21wb25lbnREaWRNb3VudCU2MCUyMCVFNSU5MiU4QyUyMCU2MGNvbXBvbmVudERpZFVwZGF0ZSU2MCUyMCVFNyU5QSU4NCVFOCVBNyU5MiVFOCU4OSVCMi4lNUNuJTVDbiVFNyVBRSU4MCVFNSU4RCU5NSVFNiU5RCVBNSVFOCVBRiVCNCUyQyUyMCVFNSVBNiU4MiVFNiU5RSU5QyVFNCVCOSU4QiVFNSU4OSU4RCVFNiU5QyU4OSU1Q24lNUNuJTYwJTYwJTYwJTVDbmNsYXNzJTIwRm9vKCklMjAlN0IlNUNuJTIwJTIwJTIwJTIwY29uc3RydWN0b3IocHJvcHMpJTIwJTdCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHN1cGVyKHByb3BzKSUzQiU1Q24lMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjB0aGlzLmJhciUyMCUzRCUyMHRoaXMuYmFyLmJpbmQodGhpcyklM0IlNUNuJTIwJTIwJTIwJTIwJTdEJTVDbiUyMCUyMCUyMCUyMGJhcigpJTIwJTdCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGNvbnNvbGUubG9nKCcxMjMnKSU1Q24lMjAlMjAlMjAlMjAlN0QlNUNuJTIwJTIwJTIwJTIwY29tcG9uZW50RGlkTW91bnQoKSUyMCU3QiU1Q24lMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJyUyQyUyMHRoaXMuYmFyKSUzQiU1Q24lMjAlMjAlMjAlMjAlN0QlNUNuJTIwJTIwJTIwJTIwY29tcG9uZW50V2lsbFVubW91bnQoKSUyMCU3QiU1Q24lMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJyUyQyUyMHRoaXMuYmFyKSU1Q24lMjAlMjAlMjAlMjAlN0QlNUNuJTdEJTVDbiU2MCU2MCU2MCU1Q24lNUNuJUU3JThFJUIwJUU1JTlDJUE4JUU1JTg4JTk5JUU1JThGJUFGJUU0JUJCJUE1JUU1JTg2JTk5JUU2JTg4JTkwJTVDbiU1Q24lNjAlNjAlNjAlNUNuZnVuY3Rpb24lMjBGb28oKSUyMCU3QiU1Q24lMjAlMjAlMjAlMjB1c2VFZmZlY3QoKCklMjAlM0QlM0UlMjAlN0IlNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZSclMkMlMjBiYXIpJTNCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHJldHVybiUyMCgpJTIwJTNEJTNFJTIwJTdCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnJTJDJTIwYmFyKSUzQiU1Q24lMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlN0QlNUNuJTIwJTIwJTIwJTIwJTdEJTJDJTIwJTVCJTVEKSUzQiU1Q24lNUNuJTIwJTIwJTIwJTIwZnVuY3Rpb24lMjBiYXIoKSUyMCU3QiU1Q24lMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBjb25zb2xlLmxvZygnMTIzJyklNUNuJTIwJTIwJTIwJTIwJTdEJTVDbiU3RCU1Q24lNjAlNjAlNjAlNUNuJTVDbiU2MHVzZUVmZmVjdCU2MCUyMCVFOSVCQiU5OCVFOCVBRSVBNCVFNCVCQyU5QSVFNSU5QyVBOCVFNiVBRiU4RiVFNiVBQyVBMSVFNyVCQiU4NCVFNCVCQiVCNiVFNiU5QiVCNCVFNiU5NiVCMCVFNiU5NyVCNiVFOSU4MyVCRCVFOCVCRiU5MCVFOCVBMSU4QyVFNCVCOCU4MCVFNiVBQyVBMSUyQyUyMCVFNyU4NCVCNiVFOCU4MCU4QyVFNSVBNCVBNyVFOSU4MyVBOCVFNSU4OCU4NiVFNiU4MyU4NSVFNSU4NiVCNSVFNCVCOCU4QiVFOCVCRiU5OSVFNSVCOSVCNiVFNCVCOCU4RCVFNiU5OCVBRiVFNiU4OCU5MSVFNCVCQiVBQyVFNiU4OSU4MCVFNiU4MyVCMyVFOCVBNiU4MSVFNyU5QSU4NCUyQyUyMCVFNSU5QiVBMCVFNiVBRCVBNCVFNSU4RiVBRiVFNCVCQiVBNSVFNCVCRCVCRiVFNyU5NCVBOCVFNyVBQyVBQyVFNCVCQSU4QyVFNCVCOCVBQSVFNSU4RiU4MiVFNiU5NSVCMCVFNiU5RCVBNSVFNiU4RSVBNyVFNSU4OCVCNiUyMCU2MHVzZUVmZmVjdCU2MCUyMCVFNCVCQiU4MCVFNCVCOSU4OCVFNiU5NyVCNiVFNSU4MCU5OSVFNCVCQyU5QSVFNSU4NiU4RCVFNiVBQyVBMSVFOCVBMiVBQiVFOCVCMCU4MyVFNyU5NCVBOC4lMjAlNjB1c2VFZmZlY3QlNjAlMjAlRTYlODklODAlRTYlOEUlQTUlRTUlOEYlOTclRTclOUElODQlRTclQUMlQUMlRTQlQkElOEMlRTQlQjglQUElRTUlOEYlODIlRTYlOTUlQjAlRTQlQjglQkElRTYlOTUlQjAlRTclQkIlODQlMkMlMjAlRTYlQUYlOEYlRTUlQkQlOTMlRTYlOTUlQjAlRTclQkIlODQlRTUlODYlODUlRTclOUElODQlRTUlOEYlOTglRTklODclOEYlRTYlOUMlODklRTYlOUIlQjQlRTYlOTYlQjAlRTYlOTclQjYlMkMlMjAlRTYlODklOEQlRTQlQkMlOUElRTklODclOEQlRTYlOTYlQjAlRTYlODklQTclRTglQTElOEMuJTIwJUU1JUE2JTgyJUU2JTlFJTlDJUU0JUI4JThEJUU4JUI1JThCJUU1JTgwJUJDJTJDJTIwJUU1JThEJUIzJUU0JUJCJUE1JTIwJTYwdXNlRWZmZWN0KGNhbGxiYWNrKSU2MCUyMCVFNyU5QSU4NCVFNiU5NiVCOSVFNSVCQyU4RiVFOCVCMCU4MyVFNyU5NCVBOCUyQyUyMCVFNSU4OCU5OSVFNCVCOCVCQSVFOSVCQiU5OCVFOCVBRSVBNCVFNiVBOCVBMSVFNSVCQyU4RiUyQyUyMCVFNiVBRiU4RiVFNiVBQyVBMSVFNiU5QiVCNCVFNiU5NiVCMCVFOSU4MyVCRCVFNCVCQyU5QSVFOCVCMCU4MyVFNyU5NCVBOCU2MHVzZUVmZmVjdCU2MCVFNCVCOCU4MCVFNiVBQyVBMS4lMjAlRTUlQTYlODIlRTYlOUUlOUMlRTglQjUlOEIlRTclQTklQkElRTYlOTUlQjAlRTclQkIlODQlMkMlRTUlODglOTklRTglQTElQTglRTclQTQlQkElRTUlQUUlODMlRTYlQjAlQjglRTglQkYlOUMlRTQlQjglOEQlRTglQTIlQUIlRTUlODYlOEQlRTYlQUMlQTElRTYlODklQTclRTglQTElOEMlMkMlMjAlRTUlOEQlQjMlRTUlOEUlOUYlRTYlOUMlQUMlRTclOUElODQlMjAlNjBjb21wb25lbnREaWRNb3VudCU2MC4lNUNuJTVDbiU2MHVzZUVmZmVjdChjYWxsYmFjayUyQyUyMGRlcCklNjAlMjAlRTQlQjglQUQlRTclOUElODQlMjAlNjBjYWxsYmFjayU2MCUyMCVFNyU5NCVBOCVFNCVCQSU4RSVFNiVCMyVBOCVFOSU5NCU4MCVFNCVCQSU4QiVFNCVCQiVCNiUyQyUyMCVFNSU5QyVBOCVFNiVBRiU4RiVFNCVCOCVBQSU2MHVzZUVmZmVjdCU2MCUyMCVFNCVCOCU4RCVFNSU4NiU4RCVFNyU5NCU5RiVFNiU5NSU4OCVFNyU5QSU4NCVFNiU5NyVCNiVFNSU4MCU5OSUyQyUyMCVFOCVBRiVBNSVFNiVCMyVBOCVFOSU5NCU4MCVFNCVCQSU4QiVFNCVCQiVCNiVFNCVCQyU5QSVFOCVBMiVBQiVFOCVCMCU4MyVFNyU5NCVBOCVFNCVCOCU4MCVFNiVBQyVBMS4lNUNuJTVDbiVFNiU5QiVCNCVFOCVBRiVBNiVFNyVCQiU4NiVFNyU5QSU4NCVFNCVCQiU4QiVFNyVCQiU4RCVFNSU4RiVBRiVFNCVCQiVBNSVFNSU4RiU4MiVFOCU4MCU4MyU1QiVFNSVBRSU5OCVFNiU5NiVCOSVFNiU5NiU4NyVFNiVBMSVBMyU1RChodHRwcyUzQSUyRiUyRnJlYWN0anMub3JnJTJGZG9jcyUyRmhvb2tzLWVmZmVjdC5odG1sKSU1Q24lNUNuJTIzJTIzJTIwJUU0JUJEJUJGJUU3JTk0JUE4JTIwSG9vayUyMEFwaSUyMCVFNSU4MSU5QSVFNyVCQiU4NCVFNCVCQiVCNiVFOSU5NyVCNCVFNyU5QSU4NCVFNyU4QSVCNiVFNiU4MCU4MSVFNSU4NSVCMSVFNCVCQSVBQiU1Q24lNUNuJTYwdXNlU3RhdGUlNjAlMjAlRTYlQUYlOEYlRTYlQUMlQTElRTklODMlQkQlRTQlQkMlOUElRTclOTQlOUYlRTYlODglOTAlRTYlOTYlQjAlRTclOUElODQlMjAlNjBzdGF0ZSU2MCUyMCVFNSU5MiU4QyUyMCU2MHNldFN0YXRlJTYwJTJDJTIwJUU1JTlCJUEwJUU2JUFEJUE0JUU2JTg4JTkxJUU0JUJCJUFDJUU1JUI5JUI2JUU0JUI4JThEJUU4JTgzJUJEJUU3JTlCJUI0JUU2JThFJUE1JUU5JTgwJTlBJUU4JUJGJTg3JTIwJTYwZXhwb3J0JTYwJTIwJUU2JTlEJUE1JUU4JUFFJUE5JUU0JUJCJTk2JUU0JUJCJUFDJUU1JTlDJUE4JUU3JUJCJTg0JUU0JUJCJUI2JUU5JTk3JUI0JUU1JTg1JUIxJUU0JUJBJUFCLiUyMCVFNCVCRCU4NiVFNiU5OCVBRiVFNSU5QyVBOCU2MCVFNSU4RiU5MSVFNSVCOCU4My0lRTglQUUlQTIlRTklOTglODUlRTglODAlODUlNjAlRTYlQTglQTElRTUlQkMlOEYlRTclOUElODQlRTUlQjglQUUlRTUlOEElQTklRTQlQjglOEIlMkMlMjAlRTglQkYlOTklRTQlQkUlOUQlRTYlOTclQTclRTYlOTglQUYlRTUlOEYlQUYlRTglODMlQkQlRTclOUElODQuJTVDbiU1Q24lRTUlOEUlOUYlRTclOTAlODYlRTUlODUlQjYlRTUlQUUlOUUlRTclOUIlQjglRTUlQkQlOTMlRTclQUUlODAlRTUlOEQlOTUlMkMlMjAlRTUlODElODclRTglQUUlQkUlRTYlOUMlODklRTQlQjglODklRTQlQjglQUElRTclQkIlODQlRTQlQkIlQjYlNjBBJTYwJTJDJTIwJTYwQiU2MCUyMCVFNSU5MiU4QyUyMCU2MEMlNjAlMjAlRTklOUMlODAlRTglQTYlODElRTUlODUlQjElRTQlQkElQUIlRTclOEElQjYlRTYlODAlODElMjAuJTIwJUU5JTgyJUEzJUU0JUI5JTg4JUU2JTg4JTkxJUU0JUJCJUFDJUU1JThGJUFGJUU0JUJCJUE1JUU1JTlDJUE4JUU3JUJCJTg0JUU0JUJCJUI2JTIwJTYwQSU2MCUyMCU2MEIlNjAlMjAlNjBDJTYwJTIwJUU0JUI4JUFEJUU5JTgzJUJEJUU4JUIwJTgzJUU3JTk0JUE4JUU0JUI4JTgwJUU2JUFDJUExJTIwJTYwdXNlU3RhdGUlNjAlMkMlMjAlRTUlOTAlODQlRTglODclQUElRTYlOUIlQjQlRTYlOTYlQjAlRTUlOTAlODQlRTglODclQUElRTclOUElODQlRTclOEElQjYlRTYlODAlODElMkMlMjAlRTglODAlOEMlRTYlQUYlOEYlRTUlQkQlOTMlRTglQkYlOTklRTQlQjglODklRTQlQjglQUElRTclQkIlODQlRTQlQkIlQjYlRTQlQjglQUQlRTYlOUMlODklRTQlQjglODAlRTQlQjglQUElRTYlOUIlQjQlRTYlOTYlQjAlRTclOEElQjYlRTYlODAlODElRTUlOTAlOEUlMkMlMjAlRTclQUIlOEIlRTUlOEQlQjMlRTUlOEYlOTElRTUlQjglODMlRTYlQjYlODglRTYlODElQUYlRTklODAlOUElRTclOUYlQTUlRTUlODklQTklRTQlQkQlOTklRTclOUElODQlRTQlQjglQTQlRTQlQjglQUElMkMlMjAlRTQlQkQlQkYlRTQlQkIlOTYlRTQlQkIlQUMlRTQlQjklOUYlRTUlOTAlOEMlRTYlQUQlQTUlRTclOUElODQlRTYlOUIlQjQlRTYlOTYlQjAlRTclOEElQjYlRTYlODAlODElRTUlQjAlQjElRTUlOEYlQUYlRTQlQkIlQTUlRTQlQkElODYuJTIwJUU4JTgwJThDJUU1JTkwJThDJUU2JTk3JUI2JUU2JTk2JUIwJUU3JTlBJTg0JUU3JThBJUI2JUU2JTgwJTgxJUU0JUI5JTlGJUU5JTlDJTgwJUU4JUE2JTgxJUU0JUJGJTlEJUU1JUFEJTk4JUU4JUI1JUI3JUU2JTlEJUE1JTJDJTIwJUU4JUJGJTk5JUU2JUEwJUI3JUU1JUE2JTgyJUU2JTlFJTlDJUU0JUI5JThCJUU1JTkwJThFJUU3JUFDJUFDJUU1JTlCJTlCJUU0JUI4JUFBJUU3JUJCJTg0JUU0JUJCJUI2JUU0JUI5JTlGJUU4JUE2JTgxJUU0JUI4JTgwJUU4JUI1JUI3JUU1JTg1JUIxJUU0JUJBJUFCJUU4JUFGJUE1JUU3JThBJUI2JUU2JTgwJTgxJUU2JTk3JUI2JTJDJTIwJUU1JThGJUFBJUU5JTlDJTgwJUU4JUE2JTgxJUU0JUJEJUJGJUU3JTk0JUE4JUU2JUFEJUEzJUU3JUExJUFFJUU3JTlBJTg0JUU1JTg4JTlEJUU1JUE3JThCJUU1JTgwJUJDJTIwJTYwdXNlU3RhdGUoaW5pdGlhbFZhbHVlKSU2MCUyMCVFNSU4RCVCMyVFNSU4RiVBRiVFNCVCRiU5RCVFOCVBRiU4MSVFNCVCQiU5NiVFNCVCQiVBQyUyMDQlMjAlRTQlQjglQUElRTclQkIlODQlRTQlQkIlQjYlRTklODMlQkQlRTQlQkYlOUQlRTYlOEMlODElRTUlOTAlOEMlRTYlQUQlQTUuJTVDbiU1Q24lMjMlMjMlMjMlMjAlRTUlQUUlOEMlRTYlOTUlQjQlRTQlQkIlQTMlRTclQTAlODElNUNuJTVDbiU2MGJpbmR0aGlzJTYwJTIwJUU4JUEzJTg1JUU5JUE1JUIwJUU1JTk5JUE4JUU5JTlDJTgwJUU4JUE2JTgxJUU4JTg3JUFBJUU1JUI3JUIxJUU1JUFFJTlFJUU3JThFJUIwJTJDJTIwJUU3JUJEJTkxJUU0JUI4JThBJUU2JTlDJTg5JUU0JUI4JThEJUU1JUIwJTkxJUU2JTk1JTk5JUU3JUE4JThCJTJDJTIwbnBtJUU0JUI4JThBJUU0JUI5JTlGJUU2JTlDJTg5JUU3JThFJUIwJUU2JTg4JTkwJUU3JTlBJTg0JUU1JUJBJTkzJUU1JThGJUFGJUU0JUJCJUE1JUU0JUJEJUJGJUU3JTk0JUE4LiUyMCVFNSVBNiU4MiVFNiU5RSU5QyVFNCVCOCU4RCVFNSU5NiU5QyVFNiVBQyVBMiVFOCVBMyU4NSVFOSVBNSVCMCVFNSU5OSVBOCVFNyU5QSU4NCVFOCVBRiU5RCUyQyUyMCVFNCVCOSU5RiVFNSU4RiVBRiVFNCVCQiVBNSVFNSU5QyVBOCUyMCU2MGNvbnN0cnVjdG9yJTYwJTIwJUU0JUI4JUFEJUU2JThDJUE4JUU0JUI4JUFBJTIwJTYwYmluZCU2MC4lNUNuJTVDbiUzQ3NjcmlwdCUyMHNyYyUzRCU1QyUyMmh0dHBzJTNBJTJGJTJGZ2lzdC5naXRodWIuY29tJTJGZmE5M2h3cyUyRjY5ZjQyYjc1YmRlZjA3YTFiYzE4Mjg0ODdjNjhlZDk2LmpzJTVDJTIyJTNFJTNDJTJGc2NyaXB0JTNFJTVDbiU1Q24lMjMlMjMlMjMlMjAlRTQlQkQlQkYlRTclOTQlQTglRTYlOTYlQjklRTYlQjMlOTUlNUNuJTVDbiVFNyVBRSU4MCVFNyU5RiVBRCVFNiU5RCVBNSVFOCVBRiVCNCUyQyUyMCVFNSVBRiVCOSVFNCVCQSU4RSUyMCU2MHN0YXRlJTYwJTIwJUU1JTg1JUIxJUU0JUJBJUFCJTJDJTIwJUU2JTg4JTkxJUU0JUJCJUFDJUU5JTlDJTgwJUU4JUE2JTgxJUU1JTg4JTlCJUU1JUJCJUJBJUU0JUI4JTgwJUU0JUI4JUFBJTIwJTYwU3RvcmUlNjAlMjAlMkMlRTYlOUQlQTUlRTQlQkQlQkYlRTUlQkUlOTclRTQlQkIlQkIlRTYlODQlOEYlRTclQjIlOTIlRTUlQkElQTYlRTclOUElODQlRTclOEElQjYlRTYlODAlODElRTUlODUlQjElRTQlQkElQUIlRTklODMlQkQlRTUlOEYlQUYlRTQlQkIlQTUlRTUlQUUlOUUlRTclOEUlQjAoJUU1JThGJUFGJUU0JUJCJUE1JUU2JTk4JUFGJUU1JTg1JUE4JUU1JUIxJTgwJTJDJTIwJUU0JUI5JTlGJUU1JThGJUFGJUU0JUJCJUE1JUU2JTk4JUFGJUU2JUE4JUExJUU1JTlEJTk3JUU1JTg2JTg1JTJDJTIwJUU3JTk0JTlBJUU4JTg3JUIzJUU1JThGJUFBJUU2JTk4JUFGJUU0JUI4JUE0JUU0JUI4JUFBJUU3JUJCJTg0JUU0JUJCJUI2JUU5JTk3JUI0KS4lMjAlRTUlQkQlOTMlRTclODQlQjYlRTUlOTUlQTYlMkMlMjAlRTglQkYlOTklRTQlQjglQUElMjAlNjBmb29TdG9yZSU2MCUyMCVFNiU5OCVBRiVFOSU5QyU4MCVFOCVBNiU4MSUyMCU2MGV4cG9ydCU2MCUyMCVFNSU4NyVCQSVFNSU4RSVCQiVFNyU5QSU4NCUyQyUyMCVFOCU4MCU4QyVFNSU4NSVCNiVFNCVCQiU5NiVFOSU5QyU4MCVFOCVBNiU4MSVFNSU4NSVCMSVFNCVCQSVBQiVFOCVCRiU5OSVFNCVCOCVBQSVFNyU4QSVCNiVFNiU4MCU4MSVFNyU5QSU4NCVFNyVCQiU4NCVFNCVCQiVCNiVFNSU4RiVBQSVFOCVBNiU4MSUyMCU2MGltcG9ydCU2MCUyMCVFOCVCRiU5OSVFNCVCOCVBQSUyMCU2MGZvb1N0b3JlJTYwJTIwJUU1JUIwJUIxJUU4JUExJThDJUU1JTk1JUE2LiU1Q24lNUNuJTIwJTIwJTIwJTIwaW1wb3J0JTIwU3RvcmUlMjBmcm9tJTIwJyU0MCUyRnV0aWxzJTJGc2hhcmVkLXN0YXRlJyUzQiU1Q24lMjAlMjAlMjAlMjBleHBvcnQlMjBjb25zdCUyMGZvb1N0b3JlJTIwJTNEJTIwbmV3JTIwU3RvcmUoKSUzQiU1Q24lNUNuJUU2JThFJUE1JUU3JTlEJTgwJTJDJTIwJUU1JTg4JTlCJUU1JUJCJUJBJUU5JTlDJTgwJUU4JUE2JTgxJUU1JTg1JUIxJUU0JUJBJUFCJUU3JTlBJTg0JUU3JThBJUI2JUU2JTgwJTgxJTVDbiU1Q24lMjAlMjAlMjAlMjBjb25zdCUyMGluaXRpYWxWYWx1ZSUyMCUzRCUyMDAlM0IlNUNuJTIwJTIwJTIwJTIwZm9vU3RvcmUuY3JlYXRlU3RhdGUoJ3N0YXRlTmFtZSclMkMlMjBpbml0aWFsVmFsdWUpJTNCJTVDbiU1Q24lRTglQkYlOTklRTYlQTAlQjclRTUlQjAlQjElRTklODUlOEQlRTclQkQlQUUlRTUlQTUlQkQlRTQlQkElODYlRTQlQjglODAlRTQlQjglQUElRTUlQjclQTUlRTUlOEUlODIlRTYlOTYlQjklRTYlQjMlOTUlMkMlMjAlRTQlQjklOEIlRTUlOTAlOEUlRTYlQUYlOEYlRTUlQkQlOTMlRTklOUMlODAlRTglQTYlODElRTUlODUlQjElRTQlQkElQUIlRTglQkYlOTklRTQlQjglQUElRTclOEElQjYlRTYlODAlODElRTYlOTclQjYlMkMlMjAlRTUlOEYlQUElRTglQTYlODElRTUlOUMlQTglRTclQkIlODQlRTQlQkIlQjYlRTUlODYlODUlNUNuJTVDbiUyMCUyMCUyMCUyMGZ1bmN0aW9uJTIwQmFyKCklMjAlN0IlNUNuJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwY29uc3QlMjAlNUJmb29TdGF0ZSUyQyUyMHNldEZvb1N0YXRlJTVEJTIwJTNEJTIwZm9vU3RvcmUudXNlU3RhdGUoJ3N0YXRlTmFtZScpJTNCJTVDbiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC4uLiU1Q24lMjAlMjAlMjAlMjAlN0QlNUNuJTIwJTIwJTIwJTIwJTVDbiVFNSVCMCVCMSVFOCU4MyVCRCVFNSU5MCU4QyVFNiVBRCVBNSVFNSU5NSVBNiElNUNuJTVDbiVFOCVCRiU5OSVFNiVBMCVCNyVFNSVCMCVCMSVFNSU4RiVBRiVFNCVCQiVBNSVFOCVCNyU5RiUyMCU2MHJlZHV4JTYwJTIwJUU4JUJGJTk4JUU2JTlDJTg5JTIwJTYwbW9ieCU2MCUyMHNheSUyMGdvb2QlMjBieWUlMjAlRTQlQkElODYhJTIwJUU2JUFGJTk1JUU3JUFCJTlGJUU0JUJCJTk2JUU0JUJCJUFDJUU1JUFFJTlFJUU1JTlDJUE4JUU2JTk4JUFGJUU0JUI4JThEJUU1JUIwJThGJUU1JTk1JThBLi4uJTVDbiUyMiUyQyUyMl90aW1lU3RyJTIyJTNBJTIyMjAxOCVFNSVCOSVCNDExJUU2JTlDJTg4MTclRTYlOTclQTUlMjIlN0Q="</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><script type="text/javascript" src="https://gist.github.com/fa93hws/69f42b75bdef07a1bc1828487c68ed96.json?callback=handleblogBodygist0" async=""></script></head>
  
  <body>
    <div id="root"><aside class="left--2pHSa close--3wCU-"><div class="author--3YT87"><a class="db" href="/"><img class="avatar--3uR7W" src="https://avatars0.githubusercontent.com/u/10626756?v=4"></a><p class="name--22IyH">夏目天子</p><p class="email--rI8yL">wjun0912@gmail.com</p></div><nav class="nav--2jVs8"><ul><li class="nav-list-item--1g_uE"><a class="nav-menu--2MM-7" href="/"><i class="icon-home3--a75fH icon--2YH0v"></i><span>Home</span></a></li><li class="nav-list-item--1g_uE"><a class="nav-menu--2MM-7" href="/"><i class="icon-archive--25fV6 icon--2YH0v"></i><span>Archives</span></a></li><li class="nav-list-item--1g_uE"><a class="nav-menu--2MM-7" href="/"><i class="icon-price-tags--1qFE8 icon--2YH0v"></i><span>Tags</span></a></li><li class="nav-list-item--1g_uE"><a class="nav-menu--2MM-7" href="https://github.com/fa93hws" target="_blank"><i class="icon-github--2RaR7 icon--2YH0v"></i><span>Github</span></a></li><li class="nav-list-item--1g_uE"><a class="nav-menu--2MM-7" href="https://www.weibo.com/hinanawi" target="_blank"><i class="icon-sina-weibo--3OYod icon--2YH0v"></i><span>Weibo</span></a></li></ul></nav></aside><div class="main__container expand"><div class="top--1QHdO"><i class="icon--JDmID icon-menu--3JFJ8"></i><h4 class="title--1_E39">将 hook api 用于组件件通讯</h4><i class="icon-share2--3DCDg icon--JDmID icon--share--3ZGih"></i></div><main><header class="global__header"></header><article class="article--1Bsc7 loaded--2TliX"><header class="header--66ikt"><h1 class="title--3N9XV">将 hook api 用于组件件通讯</h1><time class="time--2z76A">2018年11月17日</time></header><section class="markdown-body body--1_vdq" id="blogBody"><h2>前言</h2>
<p>虽然在 <code>React</code> 中父子组件通讯非常便利, 但是兄弟间, 或者隔了好几代的组件间通讯相对比较麻烦. 一般在这种情况下会选择引入 <code>Redux</code> 或是 <code>Mobx</code> 作为一个全局, 或者一个模块内的状态管理工具. 尽管他们的体积都比较庞大, 但是在这个需求面前他们依旧是必不可少的配置之一.
然而随着 <code>Hook Api</code> 的问世界, 其无限的可能性让人浮想连篇.</p>
<p>本文将会详述如何运用 <code>Hook Api</code> 替代 <code>Redux</code> / <code>Mobx</code> 来担当其组件间甚至是全局的状态管理工具.
本文将会首先会简短的介绍下 <code>Hook Api</code> 之后将会介绍如何使用他们来实现任意粒度的状态管理.</p>
<h2>Hook Api</h2>
<p><code>Hook Api</code> 是 react 于 2018 年提出的最新Api, 目前(2018年11月18日)还处于 alpha 阶段(React 16.7.0-alpha.2). 该 Api 的主要功能在于强化了 <code>functional component</code> 对 <code>state</code> 以及生命周期函数(例如 <code>componentDidMount</code>等) 的操作能力, 使得 <code>functional component</code> 不再是 <code>stateless component</code>, 而成为了 <code>stateful component</code>, 并且能够和<code>class component</code>一样使用生命周期函数. 不仅��此, <code>Hook Api</code>还大大增强了逻辑的可复用性, 在笔者看来,该 Api 必将被各大前端框架借鉴并引领一场 Api 的革命.</p>
<p>关于 <code>Hook Api</code> 更详细的介绍可参考 2018 年的 <a href="https://www.youtube.com/watch?v=dpw9EHDh2bM">React Conf</a> 或是 <a href="https://reactjs.org/docs/hooks-reference.html">官方文档</a></p>
<h3>useState</h3>
<p>对于一个 <code>React</code> 中传统的 <code>class component</code>来说, 更新 <code>state</code> 不仅需要在 <code>constructor</code> 中初始化, 还需要每次都调用 <code>setState</code> 来通知 UI 更新. 代码通常相当冗余. 因此传统的 <code>React</code> 设计模式通常都建议程序员将组件拆分成负责逻辑的 <code>container</code> 以及负责 UI 展现的 <code>component</code>. <code>container</code> 负责各种 <code>state</code> 逻辑更新, 生命周期函数操作, 并将需要渲染的数据通过 <code>props</code> 传递给 负责 UI 展现的 <code>component</code>. 而这个 <code>component</code> 不保有任何 <code>state</code>(也因此称之为 <code>stateless component</code>), 只是根据 <code>container</code> 传递的 <code>props</code> 渲染.</p>
<p>这种传统的做法往往使得很简单的事情需要相当大的代码量才能完成. 简单来说, 对于一个计数器 (为了简化代码, 并没有拆分成 <code>container</code> 和 <code>component</code>)</p>
<pre><code>class Counter extends React.Component {
    constructor(props) {
        this.state = {
            counter: 0
        };
        this.handleClick = this.handleClick.bind(this);
    }
    
    handleClick() {
        this.setState({
            ...this.state,
            counter: this.state.counter + 1
        });
    }
    
    render() {
        return (
            &lt;div&gt;
                &lt;p&gt;{this.state.counter}&lt;/p&gt;
                &lt;button onClick={this.handleClick}&gt;
                    点我
                &lt;/button&gt;
            &lt;/div&gt;
        );
    }
}
</code></pre>
<p>可以看到, 仅仅一个counter, 就需要 20 多行的代码才能完成, 并且大部分的代码都用来处理诸如 <code>setState</code> 需要整个新的 <code>state</code> 而不是只更新其中的一两个字段, <code>javascript</code> 天生的 <code>this</code> 指代混乱导致的在构造函数中的<code>bind</code>. 并且如果其他地方也需要有 <code>counter</code> 点击事件的话, 该段代码中的逻辑并不能直接用于另一个组件,只能使用丑陋的复制粘帖.</p>
<p>为了解决这个问题, <code>useState</code> 应运而生. 顾名思义, <code>useState</code> 就是使用 <code>state</code> 的意思. 同样的对于上述 <code>counter</code>, 现在只需要</p>
<pre><code>function Counter() {
    [counter, setCounter] = React.useState(0);
    return (
        &lt;div&gt;
            &lt;p&gt;{counter}&lt;/p&gt;
            &lt;button onClick={setCounter.bind(null, counter+1)}&gt;
                点我
            &lt;/button&gt;
        &lt;/div&gt;
    )
}
</code></pre>
<p>即可, 代码量瞬间缩短了一倍, 并且可��性也好了很多(相比与之前许多意义不明的<code>bind</code>, <code>setState</code> 中的 <code>...</code>).
更令人称赞的是, 当其他地方也需要点击计数功能时, 这段逻辑完全可以抽离成为单独的一段函数, 并且在多个组建中调用.</p>
<pre><code>function Counter() {
    [counter, inc] = useCounter(0);
    return (
        &lt;div&gt;
            &lt;p&gt;{Counter}&lt;/p&gt;
            &lt;button onClick={inc}
                点我
            &lt;/button&gt;
        &lt;/div&gt;
    )
}

function useCounter(initialValue) {
    [counter, setCounter] = React.useState(initialValue);
    function inc() {
        setCounter(counter + 1);
    }
    return [counter, inc];
}
</code></pre>
<p>更详细的介绍可以参考<a href="https://reactjs.org/docs/hooks-state.html">官方文档</a></p>
<h3>useEffect</h3>
<p>与 <code>useState</code> 相对, <code>useEffect</code> 则不那么的顾名思义. 其表示使用效果, 因为传统的 <code>class component</code> 中, <code>componentDidMount</code> 和 <code>componentDidUpdate</code> 都会带来各种效果, 也因为 <code>React</code> 团队想要淡化这两者的区别,因此 <code>useEffect</code> 就诞生了, 它被用于在<code>functional component</code> 中担任 <code>componentDidMount</code> 和 <code>componentDidUpdate</code> 的角色.</p>
<p>简单来说, 如果之前有</p>
<pre><code>class Foo() {
    constructor(props) {
        super(props);
        this.bar = this.bar.bind(this);
    }
    bar() {
        console.log('123')
    }
    componentDidMount() {
        window.addEventListener('resize', this.bar);
    }
    componentWillUnmount() {
        window.removeEventListener('resize', this.bar)
    }
}
</code></pre>
<p>现在则可以写成</p>
<pre><code>function Foo() {
    useEffect(() =&gt; {
        window.addEventListener('resize', bar);
        return () =&gt; {
            window.removeEventListener('resize', bar);
        }
    }, []);

    function bar() {
        console.log('123')
    }
}
</code></pre>
<p><code>useEffect</code> 默认会在每次组件更新时都运行一次, 然而大部分情况下这并不是我们所想要的, 因此可以使用第二个参数来控制 <code>useEffect</code> 什么时候会再次被调用. <code>useEffect</code> 所接受的第二个参数为数组, 每当数组内的变量有更新时, 才会重新执行. 如果不赋值, 即以 <code>useEffect(callback)</code> 的方式调用, 则为默认模式, 每次更新都会调用<code>useEffect</code>一次. 如果赋空数组,则表示它永远不被再次执行, 即原本的 <code>componentDidMount</code>.</p>
<p><code>useEffect(callback, dep)</code> 中的 <code>callback</code> 用于注销事件, 在每个<code>useEffect</code> 不再生效的时候, 该注销事件会被调用一次.</p>
<p>更详细的介绍可以参考<a href="https://reactjs.org/docs/hooks-effect.html">官方文档</a></p>
<h2>使用 Hook Api 做组件间的状态共享</h2>
<p><code>useState</code> 每次都会生成新的 <code>state</code> 和 <code>setState</code>, 因此我们并不能直接通过 <code>export</code> 来让他们在组件间共享. 但是在<code>发布-订阅者</code>模式的帮助下, 这依旧是可能的.</p>
<p>原理其实相当简单, 假设有三个组件<code>A</code>, <code>B</code> 和 <code>C</code> 需要共享状态 . 那么我们可以在组件 <code>A</code> <code>B</code> <code>C</code> 中都调用一次 <code>useState</code>, 各自更新各自的状态, 而每当这三个组件中有一个更新状态后, 立即发布消息通知剩余的两个, 使他们也同步的更新状态就可以了. 而同时新的状态也需要保存起来, 这样如果之后第四个组件也要一起共享该状态时, 只需要使用正确的初始值 <code>useState(initialValue)</code> 即可保证他们 4 个组件都保持同步.</p>
<h3>完整代码</h3>
<p><code>bindthis</code> 装饰器需要自己实现, 网上有不少教程, npm上也有现成的库可以使用. 如果不喜欢装饰器的话, 也可以在 <code>constructor</code> 中挨个 <code>bind</code>.</p>
<script src="https://gist.github.com/fa93hws/69f42b75bdef07a1bc1828487c68ed96.js" class="lt-blog__gist--loading" id="blogBodygist0"></script>
<h3>使用方法</h3>
<p>简短来说, 对于 <code>state</code> 共享, 我们需要创建一个 <code>Store</code> ,来使得任意粒度的状态共享都可以实现(可以是全局, 也可以是模块内, 甚至只是两个组件间). 当然啦, 这个 <code>fooStore</code> 是需要 <code>export</code> 出去的, 而其他需要共享这个状态的组件只要 <code>import</code> 这个 <code>fooStore</code> 就行啦.</p>
<pre><code>import Store from '@/utils/shared-state';
export const fooStore = new Store();
</code></pre>
<p>接着, 创建需要共享的状态</p>
<pre><code>const initialValue = 0;
fooStore.createState('stateName', initialValue);
</code></pre>
<p>这样就配置好了一个工厂方法, 之后每当需要共享这个状态时, 只要在组件内</p>
<pre><code>function Bar() {
    const [fooState, setFooState] = fooStore.useState('stateName');
    ...
}
</code></pre>
<p>就能同步啦!</p>
<p>这样就可以跟 <code>redux</code> 还有 <code>mobx</code> say good bye 了! 毕竟他们实在是不小啊...</p>
</section><section class="lt-label__section"><ul class="lt-label__list"><li class="lt-label__list-item"><a class="db" href="/label/React"><p class="lt-label__wrapper" style="background: rgb(0, 216, 255); color: black;">React</p></a></li><li class="lt-label__list-item"><a class="db" href="/label/前端"><p class="lt-label__wrapper" style="background: rgb(251, 202, 4); color: black;">前端</p></a></li></ul></section></article></main></div></div>
  <script type="text/javascript" src="/static/js/vendors.4656e408.js"></script><script type="text/javascript" src="/static/js/main.e65a143a.js"></script>
</body></html>